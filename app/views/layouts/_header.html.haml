= navbar fixed: :top do
  -# -unless current_user.nil?
  -#   -unless current_user.has_role?(:admin)
  -#     = navbar_header brand: 'Chiarcosso Dashboard', brand_link: '/', align: 'left'
  -# %h3= 'Chiarcosso Dashboard'
  = navbar_collapse do
    = navbar_group class: 'foo', id: 'menu' do
      - if current_user.present? && (current_user.has_role?(:admin) || current_user.has_role?(:personale) || current_user.has_role?('amministratore utenti') || current_user.has_role?('gestione tessere') || current_user.has_role?(:traffico) || current_user.has_role?('amministratore carte prepagate') || current_user.has_role?('carte prepagate'))
        = navbar_dropdown "Personale" do
          -# = navbar_dropdown_header 'Personale'
          -# = navbar_dropdown_divider
          - if (current_user.has_role?(:personale) || current_user.has_role?(:admin))
            = navbar_item "Persone", people_path
          - if (current_user.has_role?(:personale) || current_user.has_role?(:admin) || current_user.has_role?('gestione orari'))
            = navbar_item "Presenze e orari", manage_presence_path
          - if (current_user.has_role?(:personale) || current_user.has_role?(:admin) || current_user.has_role?('gestione orari'))
            = navbar_item "Calendario assenze", vacation_calendar_path
          - if (current_user.has_role?(:personale) || current_user.has_role?(:admin) || current_user.has_role?('gestione orari'))
            = navbar_item "Badge, festivitÃ  e permessi", manage_festivities_path
          - if (current_user.has_role?('amministratore carte prepagate') || current_user.has_role?('carte prepagate') || current_user.has_role?(:admin))
            = navbar_item "Carte prepagate", prepaid_cards_path
          - if (current_user.has_role?('amministratore utenti') || current_user.has_role?(:admin))
            = navbar_item "Utenti", users_admin_path
          - if (current_user.has_role?('gestione tessere') || current_user.has_role?(:admin))
            = navbar_item "Badge lavaggio", codes_path
          - if (current_user.has_role?(:traffico) || current_user.has_role?(:admin))
            = navbar_item "Codici MDC", mdc_codes_path
          -# = navbar_item "Dotazione", equipment_home_path
      - if current_user.present? && (current_user.has_role?(:admin))
        = navbar_dropdown "Traffico" do
          = navbar_item "Assegnazione mezzi", vehicles_assignation_path
          = navbar_item "Mezzi agenzie", external_vehicles_path
      - if current_user.present? && (current_user.has_role?(:admin) || current_user.has_role?(:magazzino) || current_user.has_role?(:lavaggio)|| current_user.has_role?(:officina)|| current_user.has_role?('amministratore officina'))
        = navbar_dropdown "Officina" do
          - if (current_user.has_role?(:lavaggio) || current_user.has_role?(:admin)|| current_user.has_role?('amministratore officina'))
            = navbar_item "Lavaggio", carwash_path
          - if (current_user.has_role?(:lavaggio) || current_user.has_role?(:admin)|| current_user.has_role?('amministratore officina')|| current_user.has_role?(:officina))
            = navbar_item "Checkup point", carwash_checks_path
          - if (current_user.has_role?(:admin)|| current_user.has_role?('amministratore officina')|| current_user.has_role?(:officina))
            = navbar_item "ODL aperti", worksheets_path
          - if (current_user.has_role?(:admin)|| current_user.has_role?('amministratore officina'))
            = navbar_item "Attualmente in lavorazione", worksheets_on_processing_path
          - if (current_user.has_role?(:admin)|| current_user.has_role?('gestione officina'))
            = navbar_item "Gestione ODL", manage_worksheets_path
          -# - if (current_user.has_role?(:officina) || current_user.has_role?(:admin))
          -#   = navbar_item "Segnalazioni", vehicle_notifications_path
          -# - if (current_user.has_role?(:officina) || current_user.has_role?(:admin))
          -#   = navbar_item "Officina", workshop_path
          - if (current_user.has_role?(:magazzino) || current_user.has_role?(:admin))
            = navbar_item "Magazzino", storage_path
          -# - if (current_user.has_role?(:magazzino) || current_user.has_role?(:admin))
            -# = navbar_item "Gestione oli", oils_path
      - if current_user.present?
        = navbar_dropdown "Manutenzioni" do
          -# - if (current_user.has_role?(:lavaggio) || current_user.has_role?(:admin)|| current_user.has_role?("amministratore manutenzioni") || current_user.has_role?("manutenzioni"))
          -#   = navbar_item "Lavaggio", carwash_path
          - if (current_user.has_role?('visione odl esterni') || current_user.has_role?(:admin) || current_user.has_role?("amministratore manutenzioni") || current_user.has_role?("amministratore officina"))
            = navbar_item "Odl off. esterne", manage_external_worksheets_path

          = navbar_item "Mezzi", vehicles_path
          = navbar_item "Ultimi controlli", last_vehicle_checks_path
          - if (current_user.has_role?(:admin)|| current_user.has_role?("amministratore manutenzioni"))
            = navbar_item "Modelli veicolo", vehicle_models_path
          - if (current_user.has_role?(:admin) || current_user.has_role?("amministratore manutenzioni"))
            = navbar_item "Tipi di veicolo", vehicle_types_path
      - if current_user.present? && (current_user.has_role?(:amministrazione) || current_user.has_role?(:admin) || current_user.has_role?(:magazzino) || current_user.has_role?(:ddt) || current_user.has_role?('mod. ditte'))
        = navbar_dropdown "Amministrazione" do
          - if (current_user.has_role?(:ddt) || current_user.has_role?(:traffico) || current_user.has_role?(:admin))
            = navbar_item "Ordini di trasporto", mdc_transport_documents_path('opened')
          - if (current_user.has_role?(:amministrazione) || current_user.has_role?(:magazzino) || current_user.has_role?(:admin))
            = navbar_item "Totali", admin_totals_path
          - if (current_user.has_role?('mod. ditte') || current_user.has_role?(:admin))
            = navbar_item "Ditte", companies_path
          - if (current_user.has_role?(:personale) || current_user.has_role?(:admin))
            = navbar_item "Persone", people_path
          - if (current_user.has_role?(:personale) || current_user.has_role?(:admin))
            = navbar_item "Ruoli aziendali", company_relations_path
      - if current_user.present? && current_user.has_role?(:admin)
        = navbar_dropdown "Admin" do
          - if current_user.has_role?(:admin)
            = navbar_item "Gestione", admin_manage_path
          - if current_user.has_role?(:admin)
            = navbar_item "Importa dati Access", admin_import_vehicles_path
          - if current_user.has_role?(:admin)
            = navbar_item "Query", admin_queries_path
          - if current_user.has_role?(:admin)
            = navbar_item "SOAP", admin_soap_path
      -# = navbar_item "About Us", '/about-us'
      -# = navbar_item '/contact' do
        %span.glyphicon.glyphicon-hand-right
        Contact Us!

    = navbar_group align: 'right' do
      - if current_user.present?
        - unless current_user.has_role?(:admin)
          = navbar_text current_user.name
        -# = navbar_text current_user.roles.pluck(:name).join(', ')
        = navbar_item "Impostazioni", edit_user_registration_path
        %li
          = link_to "Log Out", destroy_user_session_path, method: :delete, :class => 'navbar_item'
      - else
        = navbar_item "Log In", new_user_session_path
-# %body
-#   %header.navbar-dark.bg-inverse.navbar-fixed-top
-#     .container
-#       .row
-#         .col-xs-4
-#           = image_tag "logo.png", { class: 'img-responsive', height: 50 }
-#         .col-xs-8
-#           - if user_signed_in?
-#             %strong>
-#               = current_user.person.name
-#               = current_user.person.surname
-#             \.
-#             \#{link_to 'Edit profile', edit_user_registration_path, :class => 'navbar-link'} |
-#             \#{link_to "Logout", destroy_user_session_path, method: :delete, :class => 'navbar-link'}
-#           - else
-#             = link_to "Sign up", new_user_registration_path, :class => 'navbar-link'
-#             |
-#             \#{link_to "Login", new_user_session_path, :class => 'navbar-link'}
-#       %nav
-#         %ul.nav.navbar-nav.navbar-right.row
-#           %li.col-xs-1= link_to "Aree",   '#'
-#           %li.col-xs-1= link_to "Agenda",   '#'
-#           %li.col-xs-1= link_to "Rubrica", '#'
-#           %li.col-xs-1= link_to "Comunicazioni", '#'
-#           %li.col-xs-1= link_to "Scadenze", '#'
-#           %li.col-xs-1= link_to "Segnalazioni", '#'
-#           %li.col-xs-1= link_to "Note", '#'
-#           %li.col-xs-1= link_to "Manuali", '#'
-#       /
-#         <div class="row">
-#         <div class="col-sm-1"><a href="/ideas">Aree</a></div>
-#         <div class="active col-sm-1"><a href="/ideas">Agenda</a></div>
-#         <div class="col-sm-1"><a href="/ideas">Rubrica</a></div>
-#         <div class="col-sm-2"><a href="/ideas">Comunicazioni</a></div>
-#         <div class="col-sm-2"><a href="/ideas">Scadenze</a></div>
-#         <div class="col-sm-2"><a href="/ideas">Segnalazioni</a></div>
-#         <div class="col-sm-1"><a href="/ideas">Note</a></div>
-#         <div class="col-sm-1"><a href="/ideas">Manuali</a></div>
-#         </div>
